{"ast":null,"code":"import { HttpParams } from \"@angular/common/http\";\nimport { catchError, delay, retry, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./error.service\";\nexport class ProductService {\n  constructor(http, errorService) {\n    this.http = http;\n    this.errorService = errorService;\n    this.products = [];\n  }\n  getAll() {\n    return this.http.get('https://fakestoreapi.com/products', {\n      params: new HttpParams({\n        fromObject: {\n          limit: 5\n        }\n      })\n    }).pipe(delay(200), retry(2), tap(products => this.products = products), catchError(this.errorHandler.bind(this)));\n  }\n  errorHandler(error) {\n    this.errorService.handle(error.message);\n    return throwError(() => error.message);\n  }\n  create(product) {\n    return this.http.post('https://fakestoreapi.com/products', product);\n  }\n}\nProductService.ɵfac = function ProductService_Factory(t) {\n  return new (t || ProductService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.ErrorService));\n};\nProductService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProductService,\n  factory: ProductService.ɵfac,\n  providedIn: \"root\"\n});","map":{"version":3,"mappings":"AAAA,SAAwCA,UAAU,QAAQ,sBAAsB;AAEhF,SAASC,UAAU,EAAEC,KAAK,EAAcC,KAAK,EAAEC,UAAU,QAAQ,MAAM;;;;AAQvE,OAAM,MAAOC,cAAc;EACvBC,YAAoBC,IAAgB,EAAUC,YAA2B;IAArD,SAAI,GAAJD,IAAI;IAAsB,iBAAY,GAAZC,YAAY;IAI1D,aAAQ,GAAe,EAAE;EAFzB;EAIAC,MAAM;IACH,OAAO,IAAI,CAACF,IAAI,CAACG,GAAG,CAAa,mCAAmC,EAC/D;MACIC,MAAM,EAAE,IAAIX,UAAU,CAAC;QAACY,UAAU,EAAE;UAACC,KAAK,EAAC;QAAC;MAAC,CAAC;KACjD,CAAC,CAACC,IAAI,CAACZ,KAAK,CAAC,GAAG,CAAC,EAClBC,KAAK,CAAC,CAAC,CAAC,EACRY,GAAG,CAACC,QAAQ,IAAI,IAAI,CAACA,QAAQ,GAAGA,QAAQ,CAAC,EACzCf,UAAU,CAAC,IAAI,CAACgB,YAAY,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC,CACvC;EACT;EAEQD,YAAY,CAACE,KAAwB;IACzC,IAAI,CAACX,YAAY,CAACY,MAAM,CAACD,KAAK,CAACE,OAAO,CAAC;IACvC,OAAOjB,UAAU,CAAC,MAAMe,KAAK,CAACE,OAAO,CAAC;EAC1C;EAEAC,MAAM,CAACC,OAAiB;IACpB,OAAO,IAAI,CAAChB,IAAI,CAACiB,IAAI,CAAW,mCAAmC,EAAED,OAAO,CAAC;EACjF;;AAzBSlB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAAoB,SAAdpB,cAAc;EAAAqB,YAHX;AAAM","names":["HttpParams","catchError","delay","retry","throwError","ProductService","constructor","http","errorService","getAll","get","params","fromObject","limit","pipe","tap","products","errorHandler","bind","error","handle","message","create","product","post","factory","providedIn"],"sourceRoot":"","sources":["/Users/Konstantin/eclipse-workspace/spring-boot-demo/src/front-end/src/app/services/product.service.ts"],"sourcesContent":["import { HttpClient, HttpErrorResponse, HttpParams } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { catchError, delay, Observable, retry, throwError } from \"rxjs\";\nimport { IProduct } from \"../models/product\";\nimport { ErrorService } from \"./error.service\";\n\n@Injectable({\n    providedIn: \"root\"\n})\n\nexport class ProductService {\n    constructor(private http: HttpClient, private errorService : ErrorService) {\n\n    }\n\n    products: IProduct[] = []\n\n    getAll(): Observable<IProduct[]> {\n       return this.http.get<IProduct[]>('https://fakestoreapi.com/products',\n            {\n                params: new HttpParams({fromObject: {limit:5}})\n            }).pipe(delay(200),\n            retry(2),\n            tap(products => this.products = products),\n            catchError(this.errorHandler.bind(this))\n            )\n    }\n\n    private errorHandler(error: HttpErrorResponse) {\n        this.errorService.handle(error.message)\n        return throwError(() => error.message)\n    }\n\n    create(product: IProduct): Observable<IProduct> {\n        return this.http.post<IProduct>('https://fakestoreapi.com/products', product)\n    }\n\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}